<!--
 * @Description: ------------ fileDescription -----------
 * @Author: snows_l snows_l@163.com
 * @Date: 2024-08-14 12:23:38
 * @LastEditors: snows_l snows_l@163.com
 * @LastEditTime: 2025-01-12 01:00:47
 * @FilePath: /BLOG/src/components/common/LImg.vue
-->

<!--
  * @Description: å›¾ç‰‡å±•ç¤ºç»„ä»¶
  *props:
  * src: å›¾ç‰‡åœ°å€
  * fit: å›¾ç‰‡ç¼©æ”¾ç±»å‹ é»˜è®¤ fill
  * size: å›¾ç‰‡å¤§å° é»˜è®¤ 60px
  * isUnPreview: æ˜¯å¦ä¸æ˜¾ç¤ºé¢„è§ˆ é»˜è®¤ false
  * loadingText: åŠ è½½æ–‡å­— é»˜è®¤ åŠ è½½ä¸­...
  * isText: æ˜¯å¦æ˜¾ç¤ºæ–‡å­— é»˜è®¤ true
  * alt: å›¾ç‰‡altå±æ€§ é»˜è®¤ ''
 -->
<template>
  <el-image class="pointer el-img-warp" :width="width" :height="height" preview-teleported hide-on-click-modal infinite
    :src="src" :fit="fit" :previewSrcList="isUnPreview ? [] : preview.length > 0 ? preview : [src]"
    :initial-index="index" :lazy="true">
    <template #placeholder>
      <div class="img-loading-warp pointer glogal-img-warp"
        style="width: 100%; height: 100%; background-color: #ffffff">
        <img :style="{ width: size, height: size }" class="img-loading" src="@/assets/images/common/loading.svg"
          alt="loading" />
        <span v-if="isText" class="img-loading-text tip-text">{{ loadingText }}</span>
      </div>
    </template>

    <template #error>
      <div class="img-error-warp glogal-img-warp">
        <img :style="{ width: size, height: size }" class="img-error" src="@/assets/images/common/error.png"
          alt="error" />
        <span v-if="isText" class="img-error-text tip-text">ğŸ˜­ åŠ è½½å¤±è´¥äº†</span>
      </div>
    </template>
  </el-image>
</template>

<script lang="ts" setup>

const props = defineProps({
  // å›¾ç‰‡åœ°å€
  src: {
    type: String,
    required: true,
    default: ''
  },
  // å›¾ç‰‡ç¼©æ”¾ç±»å‹ é»˜è®¤ fill
  fit: {
    type: String,
    default: 'cover'
  },
  // å›¾ç‰‡å¤§å° é»˜è®¤ 60px
  size: {
    type: String,
    default: '60px'
  },
  width: {
    type: String,
    default: '100%'
  },
  height: {
    type: String,
    default: '100%'
  },
  // æ˜¯å¦ä¸æ˜¾ç¤ºé¢„è§ˆ é»˜è®¤ false
  isUnPreview: {
    type: Boolean,
    default: false
  },
  preview: {
    type: Array,
    default: () => []
  },
  index: {
    type: Number,
    default: 0
  },
  // åŠ è½½æ–‡å­— é»˜è®¤ åŠ è½½ä¸­...
  loadingText: {
    type: String,
    default: 'åŠ è½½ä¸­...'
  },
  // æ˜¯å¦æ˜¾ç¤ºæ–‡å­— é»˜è®¤ true
  isText: {
    type: Boolean,
    default: true
  },
  alt: {
    type: String,
    default: ''
  }
});
</script>

<style lang="scss" scoped>
.el-img-warp {
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;

  .el-image__inner,
  .el-image__preview {
    cursor: url('@/assets/images/cursor/pointer.png'), auto !important;
  }
}

.glogal-img-warp {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  height: 100%;
  width: 100%;

  .tip-text {
    margin-top: 4px;
    font-size: 10px;
    color: #999;
  }
}
</style>
